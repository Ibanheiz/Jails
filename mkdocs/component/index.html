<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Component - Jails</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Jails</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="../getting-started">Getting Started</a>
            </li>
        

    
        
        <span>Api</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../app">App & Controller</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../controller">Controller</a>
                    
                </li>
            
                <li class="toctree-l1 current">
                    <a class="current" href=".">Component</a>
                    
                        <ul>
                        
                            <li class="toctree-l2"><a href="#annotations">@annotations</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#listen">.listen</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#emit">.emit</a></li>
                            
                        
                        </ul>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../model">Model</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../filter">Filter</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href=".."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    <li>Component</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/Javiani/Jails" class="icon icon-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <blockquote>
<p>Jails Components lives in their own world, does not know anything what's happening on views, controllers, apps and also doesn't know where he is or if there's other components in the page.</p>
</blockquote>
<p>One of the most often architecture mistakes is related to not giving the right responsability for the components. It results in a large peace of code which does not will be reused at all.</p>
<p>Jails provides a limited way to construct a component. Whenever you create a new component and you see yourself in a situation where you need more methods such Jails component doesn't provide, then you'll know that what you're doing either is not a component, or you can split your tasks better in such a way that your component can achieve a job completely on it's own.</p>
<p>So, the only way your component can comunicate with your application is by emmiting an event. Then, other special class can be listening to it and go forward doing whatever you need to do.</p>
<h2 id="annotations">@annotations</h2>
<p>Sometimes html <code>data</code> attributes can be very verbose, and you have to choose some long names
in order to not collide or crash another component.</p>
<p>You can use annotations to send some configurations data by setting a comment in one line.</p>
<pre><code class="html">    &lt;!-- @media-image({ max:800, src:'my/small/image.png' })--&gt;
    &lt;img data-component=&quot;media-image&quot; /&gt;

    &lt;!-- @media-image({ min:801, src:'my/bigger/image.png' })--&gt;
    &lt;img data-component=&quot;media-image&quot; /&gt;
</code></pre>

<p>The annotations will be sent to your component class, you can use them with <code>data</code> attributes to set up your component.</p>
<pre><code class="js">    jails.component('media-image', function(html, annotation){

        //Some code here...

        this.init = function(){

            var max, min, src;

            max = annotation.max || html.data('max') || Infinity;
            min = annotation.min || html.data('min') || 0;
            src = annotation.src || html.data('src') || html.prop('src')
        };

        // More code here...
    });
</code></pre>

<h2 id="listen">.listen</h2>
<pre><code>.listen( event_name, callback )
</code></pre>
<p>Listen for a higher-class module event, such as controller, views or apps.
These classes should trigger an event for components using <code>.broadcast</code> method.</p>
<h2 id="emit">.emit</h2>
<pre><code>.emit( action, [data] );
</code></pre>
<pre><code class="js">jails.component('my-component', function(html){

    var cp = this;

    this.init = function(){
        html.find('a').on('click', shout);
    };

    function shout(){
        cp.emit('shout', { something:'lalalal'});
    }
});

</code></pre>

<p>Your higher class ( <code>app</code>, <code>view</code> or <code>controller</code>) should listen to your component event.</p>
<pre><code class="js">jails.view('my-view', function(html, data){

    this.init = function(){
        this.listen('my-component:shout', log);
    };

    function log(ev, option){
        console.log('My component says' + option.something);
    }
});

</code></pre>


            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../model" class="btn btn-neutral float-right" title="Model"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../controller" class="btn btn-neutral" title="Controller"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
            <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
        
      <span><a href="../controller" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../model" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>